<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Babl - High Performance WebSocket Server</title>

      
      

      <!-- CSS -->
      
      <link rel="stylesheet" href="https://babl.ws/book.css">
      

      
      
    </head>

    <body>
        <div class="container">
        <div class="banner">
            <div class="icon"><a href="https://github.com/babl-ws/babl"><img src="https://babl.ws/GitHub-Mark-32px.png"/></a></div>
        </div>
        <div class="menu">
            
            
            <nav role="navigation">
                <ul>
                    
                        
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;getting_started&#x2F;">
                                    
                                    Getting Started
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;application&#x2F;">
                                    
                                    Application
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;architecture&#x2F;">
                                    
                                    Architecture
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;lifecyle&#x2F;">
                                    
                                    Session Lifecycle
                                </a>
                                
                            </li>
                        
                            
                            <li class="active">
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;config&#x2F;">
                                    
                                    Configuration
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;monitoring&#x2F;">
                                    
                                    Monitoring
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;performance&#x2F;">
                                    
                                    Performance
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;javadocs&#x2F;">
                                    
                                    Java Docs
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;babl.ws&#x2F;open_source&#x2F;">
                                    
                                    Open Source
                                </a>
                                
                            </li>
                        
                    
                </ul>
            </nav>
            
            
        </div>

        <div class="page">
            <div class="page__header">
                <div class="menu-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
            </div>

            <div class="page__content">
                
                <div class="book-content">
                    
    <h1>Configuration</h1>
    <style>
    table {
        width: 100%
    }
</style>
<h2 id="session-container">Session Container</h2>
<p>Configures the operation of the server as a whole.</p>
<table><thead><tr><th></th><th>Session Container Configuration Options</th></tr></thead><tbody>
<tr><td></td><td><strong>Directory (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The working directory for the web-socket server. Monitoring files will be created in this directory</td></tr>
<tr><td><strong>Default</strong></td><td><code>$TMP/babl-server</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.directory</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.serverDirectory</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Bind Address (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The hostname or IP address that the server will listen on for inbound TCP connections</td></tr>
<tr><td><strong>Default</strong></td><td><code>0.0.0.0</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.bind.address</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.bindAddress</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Listen Port (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The port that the server will listen on for inbound TCP connections</td></tr>
<tr><td><strong>Default</strong></td><td><code>8080</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.listen.port</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.listenPort</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Connection Backlog (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The maximum number of pending connections</td></tr>
<tr><td><strong>Default</strong></td><td><code>20</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.connection.backlog</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.connectionBacklog</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Poll Mode Enabled (<code>boolean</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Enables poll-mode when the number of active sessions is below a configurable limit</td></tr>
<tr><td><strong>Default</strong></td><td><code>false</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.poll.mode.enabled</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.pollModeEnabled</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Poll Mode Session Limit (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Receive sockets will be polled as part of the event-loop (rather than using <code>select()</code>) if the active session count is below or at this value</td></tr>
<tr><td><strong>Default</strong></td><td><code>5</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.poll.mode.session.limit</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.pollModeSessionLimit</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Session Monitoring File Entry Count (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Sets the maximum number of sessions per monitoring file (monitoring files will be created as needed)</td></tr>
<tr><td><strong>Default</strong></td><td><code>4096</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.session.monitoring.entry.count</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.sessionMonitoringFileEntryCount</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Session Poll Limit (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Sets the maximum number of sessions that will be ready for reading per invocation of the server event-loop</td></tr>
<tr><td><strong>Default</strong></td><td><code>200</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.session.poll.limit</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.sessionPollLimit</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Active Session Limit (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Sets the maximum number of sessions for a given container</td></tr>
<tr><td><strong>Default</strong></td><td><code>1000</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.active.session.limit</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.activeSessionLimit</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Connection Validator (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Fully-qualified classname of an implementation of <code>ConnectionValidator</code></td></tr>
<tr><td><strong>Default</strong></td><td><code>AlwaysValidConnectionValidator</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.validation.validator</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.connectionValidator</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Validation Timeout Nanos (<code>long</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Sets the timeout for connections to be validated</td></tr>
<tr><td><strong>Default</strong></td><td><code>10s</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.validation.timeout</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.validationTimeoutNanos</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Server Idle Strategy (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Sets the idling strategy used in the Server event-loop. One of <code>BUSY_SPIN,YIELDING,BACK_OFF,SLEEPING</code>.</td></tr>
<tr><td><strong>Default</strong></td><td><code>SLEEPING</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.server.idle.strategy</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionContainerConfig.serverIdleStrategy</code></td></tr>
</tbody></table>
<h2 id="session">Session</h2>
<p>Configure per-session settings.</p>
<table><thead><tr><th></th><th>Session Configuration Options</th></tr></thead><tbody>
<tr><td></td><td><strong>Maximum Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The maximum size, in bytes that the session's send or receive buffer can grow to</td></tr>
<tr><td><strong>Default</strong></td><td><code>32MB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.buffer.max.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.maxBufferSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Receive Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The initial size, in bytes of the session's receive buffer (used for encoded web socket frames read from the network)</td></tr>
<tr><td><strong>Default</strong></td><td><code>1KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.buffer.receive.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.receiveBufferSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Send Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The initial size, in bytes of the session's send buffer (used for web socket frames queued for writing to the network)</td></tr>
<tr><td><strong>Default</strong></td><td><code>1KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.buffer.send.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.sendBufferSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Decode Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The initial size, in bytes of the session's decode buffer (used for assembling decoded web socket frames before delivery to the application)</td></tr>
<tr><td><strong>Default</strong></td><td><code>1KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.buffer.decode.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.sessionDecodeBufferSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Decode Maximum Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The maximum size, in bytes of the session's decode buffer (used for assembling decoded web socket frames before delivery to the application)</td></tr>
<tr><td><strong>Default</strong></td><td><code>128KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.buffer.decode.max.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.sessionDecodeBufferMaxSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Maximum Web Socket Frame Length (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The maximum length, in bytes of the largest acceptable web socket frame</td></tr>
<tr><td><strong>Default</strong></td><td><code>64KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.frame.max.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.maxWebSocketFrameLength</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Ping Send Interval (<code>long</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The time, in nanoseconds that an idle session will wait before sending a <code>PING</code> frame to its peer</td></tr>
<tr><td><strong>Default</strong></td><td><code>5s</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.ping.interval</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.pingIntervalNanos</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Pong Response Timeout (<code>long</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The time, in nanoseconds that a session will wait before a <code>PONG</code> response before closing</td></tr>
<tr><td><strong>Default</strong></td><td><code>30s</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.session.pong.response.timeout</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SessionConfig.pongResponseTimeoutNanos</code></td></tr>
</tbody></table>
<h2 id="socket">Socket</h2>
<p>Configures network socket settings.</p>
<table><thead><tr><th></th><th>Socket Configuration Options</th></tr></thead><tbody>
<tr><td></td><td><strong>Send Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The size, in bytes of the session's socket send buffer (<code>SO_SND_BUF</code>)</td></tr>
<tr><td><strong>Default</strong></td><td><code>64KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.socket.send.buffer.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SocketConfig.sendBufferSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Receive Buffer Size (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The size, in bytes of the session's socket receive buffer (<code>SO_RCV_BUF</code>)</td></tr>
<tr><td><strong>Default</strong></td><td><code>64KB</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.socket.receive.buffer.size</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SocketConfig.receiveBufferSize</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>TCP No Delay Enabled (<code>boolean</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Indicates whether Nagle's Algorithm should be disabled (<code>SO_TCP_NODELAY</code>)</td></tr>
<tr><td><strong>Default</strong></td><td><code>false</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.socket.tcpNoDelay.enabled</code></td></tr>
<tr><td><strong>API</strong></td><td><code>SocketConfig.tcpNoDelay</code></td></tr>
</tbody></table>
<h2 id="proxy">Proxy</h2>
<p>Configures the operation of the IPC transport between the session host and the application.</p>
<p>Only used when server deployment mode is <code>DETACHED</code>.</p>
<table><thead><tr><th></th><th>Proxy Configuration Options</th></tr></thead><tbody>
<tr><td></td><td><strong>Server Adapter Poll Fragment Limit (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The maximum number of fragments processed by the server adapter for a single <code>poll</code> call</td></tr>
<tr><td><strong>Default</strong></td><td><code>50</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.server.adapter.poll.limit</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.serverAdapterPollFragmentLimit</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Application Adapter Poll Fragment Limit (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The maximum number of fragments processed by the application adapter for a single <code>poll</code> call</td></tr>
<tr><td><strong>Default</strong></td><td><code>40</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.application.adapter.poll.limit</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.applicationAdapterPollFragmentLimit</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Server Stream Base ID (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The starting stream ID for server instances</td></tr>
<tr><td><strong>Default</strong></td><td><code>6000</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.server.stream.base.id</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.serverStreamBaseId</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Application Stream Base ID (<code>int</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>The starting stream ID for application instances</td></tr>
<tr><td><strong>Default</strong></td><td><code>5000</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.application.stream.base.id</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.applicationStreamBaseId</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Launch Media Driver (<code>boolean</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Indicates whether an Aeron MediaDriver should be launched for use by proxies</td></tr>
<tr><td><strong>Default</strong></td><td><code>false</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.driver.launch</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.launchMediaDriver</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Media Driver Directory (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Indicates where the MediaDriver should be launched</td></tr>
<tr><td><strong>Default</strong></td><td><code>${java.io.tmpdir}/proxy-driver</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.driver.dir</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.mediaDriverDir</code></td></tr>
<tr><td></td><td></td></tr>
<tr><td></td><td><strong>Performance Mode (<code>String</code>)</strong></td></tr>
<tr><td><strong>Description</strong></td><td>Configures the performance level of the launched MediaDriver</td></tr>
<tr><td><strong>Default</strong></td><td><code>PerformanceMode.LOW</code></td></tr>
<tr><td><strong>Property</strong></td><td><code>babl.proxy.performance.mode</code></td></tr>
<tr><td><strong>API</strong></td><td><code>ProxyConfig.performanceMode</code></td></tr>
</tbody></table>
<h2 id="jvm-settings">JVM Settings</h2>
<p>For best performance, set the following system properties:</p>
<ul>
<li><code>-Djava.lang.Integer.IntegerCache.high=65536</code></li>
<li><code>-Djava.net.preferIPv4Stack=true</code></li>
<li><code>-XX:+UnlockExperimentalVMOptions -XX:+TrustFinalNonStaticFields</code></li>
<li><code>-XX:BiasedLockingStartupDelay=0</code></li>
</ul>


                </div>
            </div>

            <div class="prev-link">
                
    
    
    
    
        
        
            
        
    
        
        
            
        
    
        
        
            
        
    
        
        
            
        
    
        
        
            
        
    
        
        
            
                
                    <a class="previous" href="https:&#x2F;&#x2F;babl.ws&#x2F;lifecyle&#x2F;"><</a>
                
                
                
            
        
    
        
        
            
        
    
        
        
            
        
    
        
        
            
        
    

            </div>

            <div class="next-link">
                
    
        
        
        
        
            
            
            
        
            
            
            
        
            
            
            
        
            
            
            
        
            
            
            
                
            
        
            
            
                <a class="next" href="https:&#x2F;&#x2F;babl.ws&#x2F;monitoring&#x2F;">></a>
                
                
            
            
        
            
            
            
        
            
            
            
        
            
            
            
        
    

            </div>
        </div>
        </div>
        
            
            <script type="text/javascript" src="https://babl.ws/book.js"></script>
        
    </body>

</html>
